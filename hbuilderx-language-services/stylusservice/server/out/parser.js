"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flattenAndFilterAst=exports.buildAst=exports.isColor=exports.isAtRuleNode=exports.isSelectorCallNode=exports.isSelectorNode=exports.isFunctionNode=exports.isVariableNode=void 0;const css_colors_list_1=require("./css-colors-list"),stylus=require("stylus");function isVariableNode(e){return"ident"===e.nodeName&&e.val&&"expression"===e.val.nodeName}function isFunctionNode(e){return"ident"===e.nodeName&&e.val&&"function"===e.val.nodeName}function isSelectorNode(e){return"selector"===e.nodeName}function isSelectorCallNode(e){return"call"===e.nodeName&&"selector"===e.name}function isAtRuleNode(e){return-1!==["media","keyframes","atrule","import","require","supports","literal"].indexOf(e.nodeName)}function isColor(e){return"ident"===e.nodeName&&css_colors_list_1.default.indexOf(e.name)>=0||("rgba"===e.nodeName||"call"===e.nodeName&&["rgb","rgba","hsl","hsla"].indexOf(e.name)>=0)}function buildAst(e){try{return new stylus.Parser(e).parse()}catch(e){return[]}}function flattenAndFilterAst(e){if(Array.isArray(e))return e.reduce(((e,t)=>e.concat(flattenAndFilterAst(t))),[]);if(!e.nodeName)return;if("keyframes"===e.nodeName)return e;let t=[];return e.nodes&&(t=t.concat(flattenAndFilterAst(e.nodes))),e.block&&(t=t.concat(flattenAndFilterAst(e.block))),"group"===e.nodeName||"root"===e.nodeName||"block"===e.nodeName?t.length?t:e:(e.nodes=null,e.block=null,t.length?[e].concat(t):e)}exports.isVariableNode=isVariableNode,exports.isFunctionNode=isFunctionNode,exports.isSelectorNode=isSelectorNode,exports.isSelectorCallNode=isSelectorCallNode,exports.isAtRuleNode=isAtRuleNode,exports.isColor=isColor,exports.buildAst=buildAst,exports.flattenAndFilterAst=flattenAndFilterAst;