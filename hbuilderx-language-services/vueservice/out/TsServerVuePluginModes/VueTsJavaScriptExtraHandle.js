"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VueTsJavaScriptExtraCompletionHandle=void 0;class VueTsJavaScriptExtraCompletionHandle{constructor(e,t){this.info=e,this.vueCachesInProjectScope=t}doExtraCompletion(e,t,r,i,o){return e=this.addGlobalPropertyData(e,t,r,i,o)}addGlobalPropertyData(e,t,r,i,o){if(!e)return e;let s=this.vueCachesInProjectScope.getEmbeddedFile(r);if(!s)return e;let n=s.file;if(!n)return e;if(!n.isTsHostFile)return e;let a=e,l=t.getProgram();if(!l)return e;let p=l.getSourceFile(n.fileName);if(!p)return e;let c=this.info.ts.getTokenAtPosition(p,i-1),u=this.info.ts.getTouchingPropertyName(p,i-1);if(!this.info.ts.isPropertyAccessExpression(c.parent))return e;let f=c.parent.expression;if(!f||!this.info.ts.isIdentifier(f))return e;if("__VLS_ctx"!==f.getText(p))return e;let d=l.getTypeChecker(),m=d.getSymbolsInScope(c,this.info.ts.SymbolFlags.Variable);return m&&m.forEach((e=>{a.entries.push({name:e.getName(),kind:this.info.ts.SymbolDisplay.getSymbolKind(d,e,u),sortText:e.getName(),source:"vls_completion"})})),a}}exports.VueTsJavaScriptExtraCompletionHandle=VueTsJavaScriptExtraCompletionHandle;