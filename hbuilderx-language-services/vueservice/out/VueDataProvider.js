"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VueIdClassProvider=exports.NVueDataProvider=exports.VueDataProvider=exports.VueBaseDataProvider=void 0;const path=__importStar(require("path")),vscode_html_languageservice_1=require("vscode-html-languageservice"),core_1=require("../../core");class VueBaseDataProvider{constructor(e,t,r){this.project=e,this.id=t,this.dataFile=r;let i=require(r);this._dataProvider=(0,vscode_html_languageservice_1.newHTMLDataProvider)(t,{version:i.version||1,tags:i.tags||[],globalAttributes:i.globalAttributes||[],valueSets:i.valueSets||[]})}getId(){return this.id}isApplicable(e){return"vue"===e||"nvue"===e}provideTags(){return this._dataProvider.provideTags()}provideAttributes(e){return this._dataProvider.provideAttributes(e)}provideValues(e,t){return this._dataProvider.provideValues(e,t)}}exports.VueBaseDataProvider=VueBaseDataProvider;class VueDataProvider extends VueBaseDataProvider{isApplicable(e){return!("vue"!==e&&"nvue"!==e||this.project.kind!==core_1.HXProjectKind.UniApp&&this.project.kind!==core_1.HXProjectKind.UniApp_Cli)}}exports.VueDataProvider=VueDataProvider;class NVueDataProvider extends VueBaseDataProvider{isApplicable(e){return"nvue"===e&&(this.project.kind===core_1.HXProjectKind.UniApp||this.project.kind===core_1.HXProjectKind.UniApp_Cli)}}exports.NVueDataProvider=NVueDataProvider;class VueIdClassProvider{constructor(e){this.vueScriptCache=e}getEmbedCssDocument(e){let t=this.vueScriptCache.getEmbeddedFileInfo(e.uri);if(!t)return;let r=t.host.getAllEmbeddeds(),i=[];for(var a=0;a<r.length;a++){let e=r[a].file,t=path.extname(e.fileName);".css"!==t&&".scss"!==t&&".less"!==t||i.push({document:vscode_html_languageservice_1.TextDocument.create(r[a].file.fileName,t.substring(1),0,r[a].file.content),sourceMap:r[a].sourceMap})}return i}getSourceDocument(e){let t=this.vueScriptCache.getEmbeddedFileInfo(e.uri);if(!t)return;let r=t.host,i=this.vueScriptCache.getUpToDateInfo(r.fileName);return i?i.toLspDocument():void 0}}exports.VueIdClassProvider=VueIdClassProvider;