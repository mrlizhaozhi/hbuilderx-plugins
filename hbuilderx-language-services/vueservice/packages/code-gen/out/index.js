"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeCodeGen=exports.CodeGen=void 0;const source_map_1=require("../../source-map");class CodeGen{constructor(){this.text="",this.mappings=[]}getText(){return this.text}getMappings(e){return e?this.mappings.map((t=>({...t,sourceRange:e(t.data,t.sourceRange),additional:t.additional?t.additional.map((a=>({...a,sourceRange:e(t.data,a.sourceRange)}))):void 0}))):this.mappings}addCode(e,t,a,d,n){const s=this.addText(e);return this.addMapping2({mappedRange:s,sourceRange:t,mode:a,data:d,additional:n?n.map((e=>({mappedRange:s,mode:a,sourceRange:e}))):void 0}),s}addCode2(e,t,a){const d=this.addText(e);return this.addMapping2({mappedRange:d,sourceRange:{start:t,end:t+e.length},mode:source_map_1.Mode.Offset,data:a}),d}addMapping(e,t,a,d){const n={start:this.text.length,end:this.text.length+e.length};return this.addMapping2({mappedRange:n,sourceRange:t,mode:a,data:d}),n}addMapping2(e){this.mappings.push(e)}addText(e){const t={start:this.text.length,end:this.text.length+e.length};return this.text+=e,t}}function mergeCodeGen(e,t){const a=e.getText().length;for(const d of t.getMappings())e.addMapping2({...d,mappedRange:{start:d.mappedRange.start+a,end:d.mappedRange.end+a},additional:d.additional?d.additional.map((e=>({...e,mappedRange:{start:e.mappedRange.start+a,end:e.mappedRange.end+a}}))):void 0});e.addText(t.getText())}exports.CodeGen=CodeGen,exports.mergeCodeGen=mergeCodeGen;