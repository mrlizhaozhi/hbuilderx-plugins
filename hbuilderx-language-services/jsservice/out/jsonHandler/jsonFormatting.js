"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=void 0;const vscode=require("vscode"),vscode_json_languageservice_1=require("vscode-json-languageservice"),arrays_1=require("../utils/arrays");class FormatProvider{provideDocumentRangeFormattingEdits(e,r,t,n){let s=[],o=[],a=vscode_json_languageservice_1.TextDocument.create(e.uri.toString(),"json",1,e.getText());if(o=(0,vscode_json_languageservice_1.getLanguageService)({}).format(a,r,t),!(o.length<=0)){for(const e of o){const r=new vscode.Range(new vscode.Position(e.range.start.line,e.range.start.character),new vscode.Position(e.range.end.line,e.range.end.character));s.push({range:r,newText:e.newText})}return s}}}function register(){const e=["**/*.{json,jsonc}"],r=(0,arrays_1.flatten)(["json","jsonc","json_tm"].map((r=>e.map((e=>({language:r,pattern:e}))))));return vscode.languages.registerDocumentRangeFormattingEditProvider(r,new FormatProvider)}exports.register=register;