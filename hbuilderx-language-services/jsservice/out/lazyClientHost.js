"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lazilyActivateClient=exports.createLazyClientHost=void 0;const vscode=require("vscode"),typeScriptServiceClientHost_1=require("./typeScriptServiceClientHost"),arrays_1=require("./utils/arrays"),fileSchemes=require("./utils/fileSchemes"),languageDescription_1=require("./utils/languageDescription"),lazy_1=require("./utils/lazy"),managedFileContext_1=require("./utils/managedFileContext");function createLazyClientHost(e,t,i,a){return(0,lazy_1.lazy)((()=>{const r=new typeScriptServiceClientHost_1.default(languageDescription_1.standardLanguageDescriptions,e.workspaceState,t,i,a);return e.subscriptions.push(r),r}))}function lazilyActivateClient(e,t){const i=[];(0,arrays_1.flatten)([...languageDescription_1.standardLanguageDescriptions.map((e=>e.modeIds)),...t.plugins.map((e=>e.languages))]);let a=!1;return!a&&(a=!0,e.value,i.push(new managedFileContext_1.default((t=>e.value.serviceClient.toPath(t))))),vscode.Disposable.from(...i)}function isSupportedDocument(e,t){return e.indexOf(t.languageId)>=0&&!fileSchemes.disabledSchemes.has(t.uri.scheme)}exports.createLazyClientHost=createLazyClientHost,exports.lazilyActivateClient=lazilyActivateClient;