"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVueDirectivesProc=void 0;const indexlib_1=require("./../../../indexlib"),ts=require("typescript"),utils_1=require("./utils");function getVueDirectivesProc(e){new Set;function t(e){let t=utils_1.tsConvert.asTsObjectLiteralExpression(e);return!!t&&t.properties.some((e=>{var t;return e.kind==ts.SyntaxKind.MethodDeclaration?"bind"==(null===(t=utils_1.tsConvert.asTsIdentifier(e.name))||void 0===t?void 0:t.text):e.kind==ts.SyntaxKind.PropertyAssignment&&e.initializer.kind==ts.SyntaxKind.FunctionExpression&&"bind"==e.name.text}))}return{support(e,t){var i,n;const r=null!==(n=null===(i=null==t?void 0:t.source)||void 0===i?void 0:i.uri)&&void 0!==n?n:"";let s=r.lastIndexOf(".");if(s>0){let e=r.slice(s+1).toLocaleLowerCase();return/^n?vue$/.test(e)}return!1},onExportAssignment(e,i,n){let r=function(e){var t,i;let n=null===(t=utils_1.tsConvert.asTsObjectLiteralExpression(e))||void 0===t?void 0:t.properties;if(n)for(let e=0;e<n.length;e++){let t=utils_1.tsConvert.asTsPropertyAssignment(n[e]);if(t&&/^['"]?directives['"]?$/.test(t.name.getText()))return null===(i=utils_1.tsConvert.asTsObjectLiteralExpression(t.initializer))||void 0===i?void 0:i.properties}}(i.expression);if(r){const i="vue-custom-directives";let n=new indexlib_1.IndexData,s=[];n.categories.push(i);for(let i=0;i<r.length;i++){let n=utils_1.tsConvert.asTsPropertyAssignment(r[i]);if(n&&t(n.initializer)){const t=n.name.getText(),i=n.name.text;let r=t.indexOf(i),o=n.name.getStart()+r;s.push({label:i,position:e.positionAt(o)})}}if(s.length>0)return n[i]=s,n}return null}}}exports.getVueDirectivesProc=getVueDirectivesProc;