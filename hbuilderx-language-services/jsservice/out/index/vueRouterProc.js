"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVueRouterIndexProc=void 0;const indexlib_1=require("./../../../indexlib"),utils_1=require("./utils");function getVueRouterIndexProc(e){let t=new Set;return{support:(e,t)=>e.getText().indexOf("vue-router")>0,onImportDeclaration(e,r){var i,n,l;if("vue-router"===(0,utils_1.removeQuot)(r.moduleSpecifier.getText())){let e=null!==(l=null===(n=null===(i=r.importClause)||void 0===i?void 0:i.name)||void 0===n?void 0:n.getText())&&void 0!==l?l:"";e&&t.add(e)}return null},onNewExpression(e,r,i){var n,l;if(!i||!r.arguments||0===r.arguments.length)return null;let s=i.getText();if(t.has(s)){let o=r.arguments[0],u=[];function a(t){t.properties.some((t=>{let r=utils_1.tsConvert.asTsPropertyAssignment(t);if(r&&/^['\"]?path['\"]?$/.test(r.name.getText())){let t=utils_1.tsConvert.asTsStringLiteral(r.initializer),i=null==t?void 0:t.text;if(i&&i.length<2048){let r=i[0];"'"!=r&&'"'!=r||(i=i.slice(1));let n=i[i.length-1];"'"!=n&&'"'!=n||(i=i.slice(0,-1)),u.push({label:"router-path",position:e.positionAt(t.getStart()),data:i})}return!0}return!1}))}let p=null!==(l=null===(n=utils_1.tsConvert.asTsObjectLiteralExpression(o))||void 0===n?void 0:n.properties)&&void 0!==l?l:[];for(let d=0;d<p.length;d++){let g=utils_1.tsConvert.asTsPropertyAssignment(p[d]);if(g&&/^['\"]?routes['\"]?$/.test(g.name.getText())){let x=utils_1.tsConvert.asTsArrayLiteralExpression(g.initializer);null==x||x.elements.forEach((e=>{let t=utils_1.tsConvert.asTsObjectLiteralExpression(e);t&&a(t)}))}}if(u.length>0){let v=new indexlib_1.IndexData;return v.categories.push("router-path"),v["router-path"]=u,v}}return null}}}exports.getVueRouterIndexProc=getVueRouterIndexProc;