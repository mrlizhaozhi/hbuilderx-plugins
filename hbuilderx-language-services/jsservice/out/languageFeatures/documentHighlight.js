"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=void 0;const vscode=require("vscode"),arrays_1=require("../utils/arrays"),typeConverters=require("../utils/typeConverters");class TypeScriptDocumentHighlightProvider{constructor(e){this.client=e}async provideDocumentHighlights(e,t,r){const i=this.client.toOpenedFilePath(e);if(!i)return[];const n={...typeConverters.Position.toFileLocationRequestArgs(i,t),filesToSearch:[i]},o=await this.client.execute("documentHighlights",n,r);return"response"===o.type&&o.body?(0,arrays_1.flatten)(o.body.filter((e=>e.file===i)).map(convertDocumentHighlight)):[]}}function convertDocumentHighlight(e){return e.highlightSpans.map((e=>new vscode.DocumentHighlight(typeConverters.Range.fromTextSpan(e),"writtenReference"===e.kind?vscode.DocumentHighlightKind.Write:vscode.DocumentHighlightKind.Read)))}function register(e,t){return vscode.languages.registerDocumentHighlightProvider(e.syntax,new TypeScriptDocumentHighlightProvider(t))}exports.register=register;