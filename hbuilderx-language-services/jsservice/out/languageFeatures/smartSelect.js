"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=void 0;const vscode=require("vscode"),api_1=require("../utils/api"),dependentRegistration_1=require("../utils/dependentRegistration"),typeConverters=require("../utils/typeConverters");class SmartSelection{constructor(e){this.client=e}async provideSelectionRanges(e,t,n){const i=this.client.toOpenedFilePath(e);if(!i)return;const r={file:i,locations:t.map(typeConverters.Position.toLocation)},o=await this.client.execute("selectionRange",r,n);return"response"===o.type&&o.body?o.body.map(SmartSelection.convertSelectionRange):void 0}static convertSelectionRange(e){return new vscode.SelectionRange(typeConverters.Range.fromTextSpan(e.textSpan),e.parent?SmartSelection.convertSelectionRange(e.parent):void 0)}}function register(e,t){return(0,dependentRegistration_1.conditionalRegistration)([(0,dependentRegistration_1.requireMinVersion)(t,SmartSelection.minVersion)],(()=>vscode.languages.registerSelectionRangeProvider(e.syntax,new SmartSelection(t))))}SmartSelection.minVersion=api_1.default.v350,exports.register=register;