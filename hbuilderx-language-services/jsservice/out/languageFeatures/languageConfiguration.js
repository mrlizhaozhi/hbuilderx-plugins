"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LanguageConfigurationManager=void 0;const vscode=require("vscode"),dispose_1=require("../utils/dispose"),languageModeIds=require("../utils/languageModeIds"),EMPTY_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],jsTsLanguageConfiguration={indentationRules:{decreaseIndentPattern:/^((?!.*?\/\*).*\*\/)?\s*[\}\]].*$/,increaseIndentPattern:/^((?!\/\/).)*(\{[^}"'`]*|\([^)"'`]*|\[[^\]"'`]*)$/},wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:vscode.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:vscode.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|[ ])*[ ]\*([ ]([^\*]|\*(?!\/))*)?$/,oneLineAboveText:/(?=^(\s*(\/\*\*|\*)).*)(?=(?!(\s*\*\/)))/,action:{indentAction:vscode.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|[ ])*[ ]\*\/\s*$/,action:{indentAction:vscode.IndentAction.None,removeText:1}},{beforeText:/^(\t|[ ])*[ ]\*[^/]*\*\/\s*$/,action:{indentAction:vscode.IndentAction.None,removeText:1}},{beforeText:/^\s*(\bcase\s.+:|\bdefault:)$/,afterText:/^(?!\s*(\bcase\b|\bdefault\b))/,action:{indentAction:vscode.IndentAction.Indent}}]},jsxTagsLanguageConfiguration={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,onEnterRules:[{beforeText:new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join("|")}))([_:\\w][_:\\w\\-.\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>$/i,action:{indentAction:vscode.IndentAction.IndentOutdent}},{beforeText:new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join("|")}))([_:\\w][_:\\w\\-.\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),action:{indentAction:vscode.IndentAction.Indent}},{beforeText:/^>$/,afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>$/i,action:{indentAction:vscode.IndentAction.IndentOutdent}},{beforeText:/^>$/,action:{indentAction:vscode.IndentAction.Indent}}]},htmlTsLanguageConfiguration={indentationRules:{increaseIndentPattern:/<(?!\?|(?:area|base|br|col|frame|hr|html|img|input|link|meta|param)\b|[^>]*\/>)([-_\.A-Za-z0-9]+)(?=\s|>)\b[^>]*>(?!.*<\/\1>)|<!--(?!.*-->)|\{[^}"']*$/,decreaseIndentPattern:/^\s*(<\/(?!html)[-_\.A-Za-z0-9]+\b[^>]*>|-->|\})/},wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,onEnterRules:[{beforeText:new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join("|")}))([_:\\w][_:\\w-.\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>/i,action:{indentAction:vscode.IndentAction.IndentOutdent}},{beforeText:new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join("|")}))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),action:{indentAction:vscode.IndentAction.Indent}}]};let indentationRules={increaseIndentPattern:/(^.*\{[^}]*$)/,decreaseIndentPattern:/^\s*\}/};const cssTsLanguageConfiguration={wordPattern:/(#?-?\d*\.\d\w*%?)|(::?[\w-]*(?=[^,{;]*[,{]))|(([@#.!])?[\w-?]+%?|[@#!.])/g,indentationRules:indentationRules},lessTsLanguageConfiguration={wordPattern:/(#?-?\d*\.\d\w*%?)|(::?[\w-]+(?=[^,{;]*[,{]))|(([@#.!])?[\w-?]+%?|[@#!.])/g,indentationRules:indentationRules},scssTsLanguageConfiguration={wordPattern:/(#?-?\d*\.\d\w*%?)|(::?[\w-]*(?=[^,{;]*[,{]))|(([@$#.!])?[\w-?]+%?|[@#!$.])/g,indentationRules:indentationRules},handlebarsTsLanguageConfiguration={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,onEnterRules:[{beforeText:new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join("|")}))([_:\\w][_:\\w-.\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>/i,action:{indentAction:vscode.IndentAction.IndentOutdent}},{beforeText:new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join("|")}))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),action:{indentAction:vscode.IndentAction.Indent}}]};class LanguageConfigurationManager extends dispose_1.Disposable{constructor(){super();const e=[languageModeIds.javascript,languageModeIds.javascriptreact,languageModeIds.typescript,languageModeIds.typescriptreact];for(const n of e)this.registerConfiguration(n,jsTsLanguageConfiguration);this.registerConfiguration(languageModeIds.jsxTags,jsxTagsLanguageConfiguration),this.registerConfiguration(languageModeIds.html,htmlTsLanguageConfiguration),this.registerConfiguration(languageModeIds.htmlEs6,htmlTsLanguageConfiguration),this.registerConfiguration(languageModeIds.vue,htmlTsLanguageConfiguration),this.registerConfiguration(languageModeIds.css,cssTsLanguageConfiguration),this.registerConfiguration(languageModeIds.less,lessTsLanguageConfiguration),this.registerConfiguration(languageModeIds.scss,scssTsLanguageConfiguration),this.registerConfiguration(languageModeIds.handlebars,handlebarsTsLanguageConfiguration)}registerConfiguration(e,n){this._register(vscode.languages.setLanguageConfiguration(e,n))}}exports.LanguageConfigurationManager=LanguageConfigurationManager;