"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.register=void 0;const vscode=require("vscode"),nls=require("vscode-nls"),api_1=require("../utils/api"),localize=nls.loadMessageBundle(),tsDirectives=[{value:"@ts-check",description:localize("ts-check","Enables semantic checking in a JavaScript file. Must be at the top of a file.")},{value:"@ts-nocheck",description:localize("ts-nocheck","Disables semantic checking in a JavaScript file. Must be at the top of a file.")},{value:"@ts-ignore",description:localize("ts-ignore","Suppresses @ts-check errors on the next line of a file.")}],tsDirectives390=[...tsDirectives,{value:"@ts-expect-error",description:localize("ts-expect-error","Suppresses @ts-check errors on the next line of a file, expecting at least one to exist.")}];class DirectiveCommentCompletionProvider{constructor(e){this.client=e}provideCompletionItems(e,t,i){if(!this.client.toOpenedFilePath(e))return[];const s=e.lineAt(t.line).text.slice(0,t.character).match(/^\s*\/\/+\s?(@[a-zA-Z\-]*)?$/);if(s){return(this.client.apiVersion.gte(api_1.default.v390)?tsDirectives390:tsDirectives).map((e=>{const i=new vscode.CompletionItem(e.value,vscode.CompletionItemKind.Snippet);return i.detail=e.description,i.range=new vscode.Range(t.line,Math.max(0,t.character-(s[1]?s[1].length:0)),t.line,t.character),i}))}return[]}}function register(e,t){return vscode.languages.registerCompletionItemProvider(e.syntax,new DirectiveCommentCompletionProvider(t),"@")}exports.register=register;