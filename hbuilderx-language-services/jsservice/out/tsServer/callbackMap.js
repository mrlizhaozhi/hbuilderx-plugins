"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CallbackMap=void 0;const typescriptService_1=require("../typescriptService");class CallbackMap{constructor(){this._callbacks=new Map,this._asyncCallbacks=new Map}destroy(s){const e=new typescriptService_1.ServerResponse.Cancelled(s);for(const s of this._callbacks.values())s.onSuccess(e);this._callbacks.clear();for(const s of this._asyncCallbacks.values())s.onSuccess(e);this._asyncCallbacks.clear()}add(s,e,a){a?this._asyncCallbacks.set(s,e):this._callbacks.set(s,e)}fetch(s){const e=this._callbacks.get(s)||this._asyncCallbacks.get(s);return this.delete(s),e}delete(s){this._callbacks.delete(s)||this._asyncCallbacks.delete(s)}}exports.CallbackMap=CallbackMap;