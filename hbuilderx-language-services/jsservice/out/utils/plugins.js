"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PluginManager=void 0;const vscode=require("vscode"),arrays=require("./arrays"),dispose_1=require("./dispose"),path=require("path");var TypeScriptServerPlugin;!function(e){e.equals=function(e,i){return e.path===i.path&&e.name===i.name&&e.enableForWorkspaceTypeScriptVersions===i.enableForWorkspaceTypeScriptVersions&&arrays.equals(e.languages,i.languages)}}(TypeScriptServerPlugin||(TypeScriptServerPlugin={}));class PluginManager extends dispose_1.Disposable{constructor(){super(),this._pluginConfigurations=new Map,this._onDidUpdatePlugins=this._register(new vscode.EventEmitter),this.onDidChangePlugins=this._onDidUpdatePlugins.event,this._onDidUpdateConfig=this._register(new vscode.EventEmitter),this.onDidUpdateConfig=this._onDidUpdateConfig.event}get plugins(){return this._plugins||(this._plugins=this.readPlugins()),arrays.flatten(Array.from(this._plugins.values()))}setConfiguration(e,i){this._pluginConfigurations.set(e,i),this._onDidUpdateConfig.fire({pluginId:e,config:i})}configurations(){return this._pluginConfigurations.entries()}readPlugins(){const e=new Map,i=[],s=path.resolve(path.dirname(__dirname),"./tsplugins/");return i.push({name:"dcloudio",enableForWorkspaceTypeScriptVersions:!0,path:s,languages:["vue","html","css","scss","less"]}),e.set("hbuilderx-language-services",i),e}}exports.PluginManager=PluginManager;