"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addMarkdownDocumentation=exports.markdownDocumentation=exports.tagsMarkdownPreview=exports.plain=void 0;const vscode=require("vscode");function replaceLinks(n){return n.replace(/\{@(link|linkplain|linkcode) (https?:\/\/[^ |}]+?)(?:[| ]([^{}\n]+?))?\}/gi,((n,t,e,o)=>"linkcode"===t?`[\`${o?o.trim():e}\`](${e})`:`[${o?o.trim():e}](${e})`))}function processInlineTags(n){return replaceLinks(n)}function getTagBodyText(n){if(n.text){switch(n.name){case"example":const e=n.text.match(/<caption>(.*?)<\/caption>\s*(\r\n|\n)/);return e&&0===e.index?e[1]+"\n\n"+t(n.text.substr(e[0].length)):t(n.text);case"author":const o=n.text.match(/(.+)\s<([-.\w]+@[-.\w]+)>/);return null===o?n.text:`${o[1]} ${o[2]}`;case"default":return t(n.text)}return processInlineTags(n.text)}function t(n){return n.match(/^\s*[~`]{3}/g)?n:"```\n"+n+"\n```"}}function getTagDocumentation(n){switch(n.name){case"augments":case"extends":case"param":case"template":const t=(n.text||"").split(/^(\S+)\s*-?\s*/);if(3===(null==t?void 0:t.length)){const e=t[1],o=t[2],a=`*@${n.name}* \`${e}\``;return o?a+(o.match(/\r\n|\n/g)?"  \n"+processInlineTags(o):` — ${processInlineTags(o)}`):a}}const t=`*@${n.name}*`,e=getTagBodyText(n);return e?t+(e.match(/\r\n|\n/g)?"  \n"+e:` — ${e}`):t}function plain(n){return processInlineTags("string"==typeof n?n:n.map((n=>n.text)).join(""))}function tagsMarkdownPreview(n){return n.map(getTagDocumentation).join("  \n\n")}function markdownDocumentation(n,t){const e=new vscode.MarkdownString;return addMarkdownDocumentation(e,n,t),e}function addMarkdownDocumentation(n,t,e){if(t&&n.appendMarkdown(plain(t)),e){const t=tagsMarkdownPreview(e);t&&n.appendMarkdown("\n\n"+t)}return n}exports.plain=plain,exports.tagsMarkdownPreview=tagsMarkdownPreview,exports.markdownDocumentation=markdownDocumentation,exports.addMarkdownDocumentation=addMarkdownDocumentation;