"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=require("vscode-languageserver-protocol"),vscode_uri_1=require("vscode-uri"),indexlib_1=require("../../../../indexlib");class VuexStoreHandler{constructor(e){this._method=e}doComplete(e,t,o,r,a,n){let l=[],i=vscode_uri_1.URI.file(o.project.fsPath).toString();return indexlib_1.IndexDataStore.load({uri:i,name:""}).allIndexData().forEach(((e,t)=>{var o,r;let a=e["vuex-construct"];if(a instanceof Array)for(let e=0;e<a.length;e++){const t=a[e];if("construct-args"==t.label){let e;"commit"===this._method?e=null===(o=t.data)||void 0===o?void 0:o.mutations:"dispatch"===this._method&&(e=null===(r=t.data)||void 0===r?void 0:r.actions),e instanceof Array&&e.forEach((e=>{var t;let o=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"";o&&l.push({label:o,kind:vscode_languageserver_protocol_1.CompletionItemKind.Property})}))}}})),l}doCompleteResolve(e,t,o,r,a){return e}doHover(e,t,o,r){}doDefinition(e,t,o,r){let a=e.getText(o.range);if(!a)return[];let n=[],l=vscode_uri_1.URI.file(o.project.fsPath).toString();return indexlib_1.IndexDataStore.load({uri:l,name:""}).allIndexData().forEach(((t,r)=>{var l,i;let d=t["vuex-construct"],s=vscode_uri_1.URI.parse(r).fsPath;if(d instanceof Array){for(let t=0;t<d.length;t++){const r=d[t];if("construct-args"==r.label){let t;"commit"===this._method?t=null===(l=r.data)||void 0===l?void 0:l.mutations:"dispatch"===this._method&&(t=null===(i=r.data)||void 0===i?void 0:i.actions),t instanceof Array&&t.forEach((t=>{var r,l;let i=null!==(r=null==t?void 0:t.name)&&void 0!==r?r:"",d=null!==(l=null==t?void 0:t.offset)&&void 0!==l?l:-1;if(i===a&&d>=0){let t=e.positionAt(d),r={...t};r.character+=a.length,n.push({targetUri:s,targetRange:vscode_languageserver_protocol_1.Range.create(t,r),targetSelectionRange:vscode_languageserver_protocol_1.Range.create(t,r),originSelectionRange:o.range})}}))}}}})),n}doReference(e,t,o,r){return[]}}exports.default=VuexStoreHandler;