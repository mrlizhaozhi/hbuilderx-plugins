"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fs=require("fs"),jsonc_1=require("jsonc"),path=require("path"),vscode_languageserver_protocol_1=require("vscode-languageserver-protocol"),lspUtil_1=require("../../base/lspUtil");class RequireCommonHandler{doComplete(e,t,r,s,n,o){let l=[],i=path.resolve(e.uri,"../package.json");if(!fs.existsSync(i))return l;let[a,c]=jsonc_1.jsonc.safe.parse(fs.readFileSync(i).toString());if(!a&&c.dependencies){let e=c.dependencies;for(let t of Object.keys(e))e[t].startsWith("file:")&&l.push({label:t,kind:vscode_languageserver_protocol_1.CompletionItemKind.Property,documentation:t})}return l}doCompleteResolve(e,t,r,s,n){return e}doHover(e,t,r,s){}doDefinition(e,t,r,s){let n=path.resolve(r.project.fsPath,"package.json");if(!fs.existsSync(n))return[];let[o,l]=jsonc_1.jsonc.safe.parse(fs.readFileSync(n).toString());if(!o&&l.dependencies){let t=l.dependencies,s=e.getText(r.range);for(let e of Object.keys(t))if(e==s&&t[e].startsWith("file:")){let s=t[e].substring(5).trim();return[{targetUri:path.resolve(n,s),targetRange:(0,lspUtil_1.getNullRange)(),targetSelectionRange:(0,lspUtil_1.getNullRange)(),originSelectionRange:r.range}]}}return[]}doReference(e,t,r,s){return[]}}exports.default=RequireCommonHandler;