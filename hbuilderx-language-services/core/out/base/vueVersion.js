"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vueVersion=void 0;const md5=require("md5"),path=require("path"),fs=require("fs"),jsonc_1=require("jsonc"),project_1=require("./project"),fileProperties_1=require("./fileProperties"),vue2Library="vue.2.x",vue3Library="vue.3.x";function vueVersion(e){if(e.kind===project_1.HXProjectKind.UniApp||e.kind===project_1.HXProjectKind.UniApp_Cli){let r=path.join(e.sourceRoot,"manifest.json"),t=(0,fileProperties_1.getFileProperty)(r,"vue.version",((e,r)=>{let t=fs.readFileSync(e).toString();const[i,s]=jsonc_1.jsonc.safe.parse(t);if(!i)return parseInt(s.vueVersion)||2}));return t||2}let r=e.fsPath,t=path.join(r,"package.json"),i=(0,fileProperties_1.getFileProperty)(t,"vue.version",((e,r)=>{let t=fs.readFileSync(e).toString();const[i,s]=jsonc_1.jsonc.safe.parse(t);if(!i){let e=null;if(s.dependencies?e=s.dependencies:s.devDependencies&&(e=s.devDependencies),e&&e.vue){let r=e.vue;if("string"==typeof r)return r.startsWith("3")||r.startsWith("^3")||r.startsWith("~3.")?3:2}}}));return i||2}exports.vueVersion=vueVersion;