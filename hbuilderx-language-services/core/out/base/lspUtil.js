"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnippetFormat=exports.retriggerCommand=exports.isSameRange=exports.HxIconKind=exports.getRightLineTextFromOffset=exports.getNullRange=exports.getLineTextFromPosition=exports.getLineTextFromOffset=exports.getLeftLineTextFromOffset=exports.getFragmentString=exports.getContextData=exports.createDocument=void 0;const fs=require("fs"),vscode_languageserver_1=require("vscode-languageserver"),vscode_languageserver_textdocument_1=require("vscode-languageserver-textdocument"),vscode_uri_1=require("vscode-uri"),SnippetFormat=vscode_languageserver_1.InsertTextFormat.Snippet;exports.SnippetFormat=SnippetFormat;const retriggerCommand={title:"Suggest",command:"editor.action.triggerSuggest"};var HxIconKind;function getLineTextFromPosition(e,t){const n=e.getText().length,r=e.positionAt(n),o=e.lineCount,s=vscode_languageserver_1.Position.create(t.line,0);if(o===t.line+1){const t=vscode_languageserver_1.Range.create(s,r);return e.getText(t)}const i=t.line+1,g=vscode_languageserver_1.Position.create(i,0),a=e.offsetAt(g),c=e.positionAt(a-1),x=vscode_languageserver_1.Range.create(s,c);return e.getText(x)}function getLineTextFromOffset(e,t){const n=e.positionAt(t);return getLineTextFromPosition(e,n)}function getRightLineTextFromOffset(e,t){const n=getLineTextFromOffset(e,t),r=e.positionAt(t);return n.substring(r.character)}function getLeftLineTextFromOffset(e,t){const n=e.positionAt(t),r=vscode_languageserver_1.Position.create(n.line,0),o=vscode_languageserver_1.Range.create(r,n);return e.getText(o)}function getFragmentString(e,t,n){let r=t-1;const o=e;let s=n;for(n||(s=' \t\n\r":{[()]},*>+');r>=0&&-1===s.indexOf(o.charAt(r));)r--;let i=o.substring(r+1,t),g=t;for(;g!=o.length&&-1===s.indexOf(o.charAt(g));)g++;return i+o.substring(t,g)}function getContextData(e,t,n){let r=t-1;const o=e.getText();let s=n;for(n||(s=' \t\n\r":{[()]},*>+');r>=0&&-1===s.indexOf(o.charAt(r));)r--;let i=o.substring(r+1,t),g=vscode_languageserver_1.Range.create(e.positionAt(r+1),e.positionAt(t)),a=t;for(;a!=o.length&&-1===s.indexOf(o.charAt(a));)a++;let c=o.substring(t,a),x=vscode_languageserver_1.Range.create(e.positionAt(t),e.positionAt(a));return{context:i+c,leftText:i,rightText:c,contextRange:vscode_languageserver_1.Range.create(e.positionAt(r+1),e.positionAt(a)),leftRange:g,rightRange:x}}function isSameRange(e,t){return e.start.line===t.start.line&&(e.start.character===t.start.character&&(e.end.line===t.end.line&&e.end.character===t.end.character))}function createDocument(e,t){let n=fs.readFileSync(vscode_uri_1.URI.parse(e).fsPath,{encoding:"utf8",flag:"r"});return vscode_languageserver_textdocument_1.TextDocument.create(e,t,0,n)}function getNullRange(){return{start:vscode_languageserver_1.Position.create(0,0),end:vscode_languageserver_1.Position.create(0,0)}}exports.retriggerCommand=retriggerCommand,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ABC=1]="ABC",e[e.ATTRIBUTE=2]="ATTRIBUTE",e[e.CLASS=3]="CLASS",e[e.CLIPBOARD=4]="CLIPBOARD",e[e.CSS=5]="CSS",e[e.ELEMENT=6]="ELEMENT",e[e.EVENT=7]="EVENT",e[e.FILE=8]="FILE",e[e.FOLDER=9]="FOLDER",e[e.FUNCTION=10]="FUNCTION",e[e.HTML=11]="HTML",e[e.ID=12]="ID",e[e.IMAGE=13]="IMAGE",e[e.JS=14]="JS",e[e.KEYWORD=15]="KEYWORD",e[e.SELECTOR=16]="SELECTOR",e[e.SNIPPET=17]="SNIPPET",e[e.STRING=18]="STRING"}(HxIconKind||(HxIconKind={})),exports.HxIconKind=HxIconKind,exports.getLineTextFromPosition=getLineTextFromPosition,exports.getLineTextFromOffset=getLineTextFromOffset,exports.getRightLineTextFromOffset=getRightLineTextFromOffset,exports.getLeftLineTextFromOffset=getLeftLineTextFromOffset,exports.getFragmentString=getFragmentString,exports.getContextData=getContextData,exports.isSameRange=isSameRange,exports.createDocument=createDocument,exports.getNullRange=getNullRange;