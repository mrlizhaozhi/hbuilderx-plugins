"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gotoDefinition=exports.doComplete=void 0;const path=require("path"),fs=require("fs"),jsonc_1=require("jsonc"),vscode_languageserver_protocol_1=require("vscode-languageserver-protocol");function doComplete(e,t,o){let n=[],s=path.resolve(t.uri,"../package.json");if(!fs.existsSync(s))return n;let[r,i]=jsonc_1.jsonc.safe.parse(fs.readFileSync(s).toString());if(!r&&i.dependencies){let e=i.dependencies;for(let t of Object.keys(e))e[t].startsWith("file:")&&n.push({label:t,kind:vscode_languageserver_protocol_1.CompletionItemKind.Property,documentation:t})}return n}function gotoDefinition(e,t){let o=path.resolve(t.fileName,"../package.json");if(!fs.existsSync(o))return;let[n,s]=jsonc_1.jsonc.safe.parse(fs.readFileSync(o).toString());if(!n&&s.dependencies){let e=s.dependencies;for(let n of Object.keys(e))if(n==t.token.getText()&&e[n].startsWith("file:")){let s=e[n].substring(5).trim();return{definitions:[{textSpan:{start:0,length:0},fileName:path.resolve(o,s),contextSpan:{start:0,length:0}}],textSpan:{start:t.token.pos+t.offset,length:t.token.getText().length}}}}return null}exports.doComplete=doComplete,exports.gotoDefinition=gotoDefinition;