"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LessCompletionProcessor=void 0;const vscode_languageserver_1=require("vscode-languageserver"),entry_1=require("../../../../htmlservice/entry"),utils_1=require("../../../../utils"),util_1=require("../utils/util"),baseCompletionProcessor_1=require("./baseCompletionProcessor"),{LESSScanner:LESSScanner}=require("vscode-css-languageservice/lib/umd/parser/lessScanner");class LessCompletionProcessor extends baseCompletionProcessor_1.BaseCompletionProcessor{constructor(){super(...arguments),this.baseCompletionProcessor=new baseCompletionProcessor_1.BaseCompletionProcessor}async getTagCompletionData(e,t,o,a,i){if(!(0,util_1.isRightCompletionType)(a,[util_1.NodeType.Media,util_1.NodeType.MediaQuery],void 0,util_1.NodeType.Media))return i;const s=t.offsetAt(o),r=(0,util_1.getCurrentWord)(t,s);let n=(0,entry_1.getHtmlTags)(e),l=vscode_languageserver_1.Position.create(o.line,o.character-r.length);for(const e of n)i.items.push({label:e,textEdit:vscode_languageserver_1.TextEdit.replace(vscode_languageserver_1.Range.create(l,o),e),kind:vscode_languageserver_1.CompletionItemKind.Keyword,data:{hxKind:utils_1.HxIconKind.ELEMENT}});return i}async getExtraCompletionData(e,t,o,a,i,s,r){return r=await this.getTagCompletionData(e,t,o,a,r)}async doExtraCompletion(e,t,o,a,i,s,r){const n=this.isErrorAstNode(t,o,a);let l=this.getCompletionTypeFromAstNode(t,o,a);return(n||0===r.items.length)&&(l=this.getCompletionTypeFromScanner(t,o),r=await this.getCompletionDataFromScanner(t,o,l)),r=await this.getHxKindConvertedCompletionData(r),r=await this.getSelfIdSelectorCompletionData(t,o,l,r),r=await this.getDeprecatedCompletionData(t,o,l,r),r=await this.getFunctionsCompletionData(t,o,l,r),r=await this.getMediaCompletionData(t,o,l,r),r=await this.getCharsetCompletionData(t,o,l,r),r=await this.getPathCompletionData(e,t,o,l,r),r=await this.getPropertySelectorCompletionData(e,t,o,l,r),r=await this.getExtraCompletionData(e,t,o,l,i,s,r),r=await this.getIndexIdSelectorsCompletionData(e,t,o,l,r),r=await this.getIndexClassSelectorsCompletionData(e,t,o,l,r),r=await this.getGrammarCompletionData(e,t,o,l,r),r=await this.getPxConversionCompletionData(e,t,o,l,i,s,r),r=await this.getDeduplicationData(r),r=await this.getFiltrationPseudoData(t,o,l,r),r=await this.retrieveRange(t,o,l,r),r=await this.getMoveCursorData(t,o,l,r),r=await this.getAltMode(t,o,r)}}exports.LessCompletionProcessor=LessCompletionProcessor;