"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CssCompletionProcessor=void 0;const vscode_languageserver_1=require("vscode-languageserver"),vscode_uri_1=require("vscode-uri"),utils_1=require("../../../../utils"),util_1=require("../utils/util"),baseCompletionProcessor_1=require("./baseCompletionProcessor");class CssCompletionProcessor extends baseCompletionProcessor_1.BaseCompletionProcessor{constructor(){super(...arguments),this.baseCompletionProcessor=new baseCompletionProcessor_1.BaseCompletionProcessor}async getScopedCompletionData(e,o,t,s,r){s=this.baseCompletionProcessor.getCompletionTypeFromScanner(o,t);if(!(0,util_1.isRightCompletionType)(s,[util_1.NodeType.PseudoSelector],[util_1.NodeType.PseudoSelector],util_1.NodeType.PseudoSelector)||!e)return r;const i=o.offsetAt(t),n=(0,util_1.getCurrentWord)(o,i),l=t.character,c=s&&s.context&&s.context.length>0?s.context.length:0;let a=vscode_languageserver_1.Position.create(t.line,l-n.length-c),u=vscode_uri_1.URI.parse(o.uri).fsPath;if(u.endsWith(".nvue")||u.endsWith(".vue"))for(const e of utils_1.vueStyleScoped)r.items.push({label:e,textEdit:vscode_languageserver_1.TextEdit.replace(vscode_languageserver_1.Range.create(a,t),e),kind:vscode_languageserver_1.CompletionItemKind.Function,data:{hxKind:utils_1.HxIconKind.CLASS}});return r}async getExtraCompletionData(e,o,t,s,r,i,n){return n=await this.getScopedCompletionData(e,o,t,s,n)}}exports.CssCompletionProcessor=CssCompletionProcessor;