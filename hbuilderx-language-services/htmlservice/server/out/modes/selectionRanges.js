"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSelectionRanges=void 0;const languageModes_1=require("./languageModes"),positions_1=require("../utils/positions");async function getSelectionRanges(e,t,n){const a=e.getMode("html");return Promise.all(n.map((async n=>{const o=await a.getSelectionRange(t,n),g=e.getModeAtPosition(t,n);if(g&&g.getSelectionRange){let e=await g.getSelectionRange(t,n),a=e;for(;a.parent&&(0,positions_1.insideRangeButNotSame)(o.range,a.parent.range);)a=a.parent;return a.parent=o,e}return o||languageModes_1.SelectionRange.create(languageModes_1.Range.create(n,n))})))}exports.getSelectionRanges=getSelectionRanges;