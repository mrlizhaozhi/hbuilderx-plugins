"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.locateDOMNodeToPath=exports.locateDOMNodeInFile=void 0;const fs=require("fs"),vscode_html_languageservice_1=require("vscode-html-languageservice"),vscode_languageserver_textdocument_1=require("vscode-languageserver-textdocument"),vscode_uri_1=require("vscode-uri");function locateDOMNodeToPath(e){const t=e.filePath,o=e.languageId,r=e.offset,a=fs.readFileSync(t).toString(),n=vscode_uri_1.URI.file(t).toString(),s=vscode_languageserver_textdocument_1.TextDocument.create(n,o,0,a);let c=(0,vscode_html_languageservice_1.getLanguageService)({}).parseHTMLDocument(s).findNodeAt(r);const i=[];for(;c.parent&&0!==c.start;){let e=c.parent.children.indexOf(c);i.unshift(c.tag),i.unshift(e),c=c.parent}return i.join(",").toUpperCase()}function locateDOMNodeInFile(e){const t=e.filePath,o=e.languageId,r=e.indexes,a=(e.tagNames,fs.readFileSync(t).toString());let n={filePath:t,startOffset:0,endOffset:0};const s=vscode_uri_1.URI.file(t).toString(),c=vscode_languageserver_textdocument_1.TextDocument.create(s,o,0,a),i=(0,vscode_html_languageservice_1.getLanguageService)({}).parseHTMLDocument(c);if(i.roots&&i.roots.length<1)return n;let l=i.roots[0];let d=!0;return r.forEach((e=>{d||(l=l.children[Number(e)]),d=!1})),n.startOffset=l.start,n.endOffset=l.end,n}exports.locateDOMNodeToPath=locateDOMNodeToPath,exports.locateDOMNodeInFile=locateDOMNodeInFile;