"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.locate=exports.update=exports.incrementDecrement=void 0;const vscode=require("vscode"),reNumber=/[0-9]/;function incrementDecrement(e){if(!vscode.window.activeTextEditor)return void console.error("Emmet Error: No editor is active. (incrementDecrement.ts::incrementDecrement)");const t=vscode.window.activeTextEditor;return t.edit((r=>{t.selections.forEach((n=>{let c=locate(t.document,n.isReversed?n.anchor:n.active);if(!c)return;const i=t.document.getText(c);isValidNumber(i)&&r.replace(c,update(i,e))}))}))}function update(e,t){let r,n=(r=e.match(/\.(\d+)$/))?r[1].length:1,c=String((parseFloat(e)+t).toFixed(n)).replace(/\.0+$/,"");return(r=e.match(/^\-?(0\d+)/))&&(c=c.replace(/^(\-?)(\d+)/,((e,t,n)=>t+"0".repeat(Math.max(0,(r?r[1].length:0)-n.length))+n))),/^\-?\./.test(e)&&(c=c.replace(/^(\-?)0+/,"$1")),c}function locate(e,t){const r=e.lineAt(t.line).text;let n,c=t.character,i=t.character,o=!1,a=!1;for(;c>0;){if(n=r[--c],"-"===n){a=!0;break}if("."!==n||o){if(!reNumber.test(n)){c++;break}}else o=!0}for("-"!==r[i]||a||i++;i<r.length;)if(n=r[i++],"."===n&&!o&&reNumber.test(r[i]))o=!0;else if(!reNumber.test(n)){i--;break}if(c!==i&&isValidNumber(r.slice(c,i)))return new vscode.Range(t.line,c,t.line,i)}function isValidNumber(e){return!!e&&!isNaN(parseFloat(e))}exports.incrementDecrement=incrementDecrement,exports.update=update,exports.locate=locate;