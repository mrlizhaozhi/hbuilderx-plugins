"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchEditPoint=void 0;const vscode=require("vscode"),util_1=require("./util");function fetchEditPoint(e){if(!(0,util_1.validate)()||!vscode.window.activeTextEditor)return;const t=vscode.window.activeTextEditor;let n=[];t.selections.forEach((i=>{let o="next"===e?nextEditPoint(i,t):prevEditPoint(i,t);n.push(o)})),t.selections=n,t.revealRange(t.selections[t.selections.length-1])}function nextEditPoint(e,t){for(let n=e.anchor.line;n<t.document.lineCount;n++){let i=findEditPoint(n,t,e.anchor,"next");if(i)return i}return e}function prevEditPoint(e,t){for(let n=e.anchor.line;n>=0;n--){let i=findEditPoint(n,t,e.anchor,"prev");if(i)return i}return e}function findEditPoint(e,t,n,i){let o=t.document.lineAt(e),r=o.text;if(e!==n.line&&o.isEmptyOrWhitespace&&r.length)return new vscode.Selection(e,r.length,e,r.length);e===n.line&&"prev"===i&&(r=r.substr(0,n.character));let c="next"===i?r.indexOf('""',e===n.line?n.character:0):r.lastIndexOf('""'),d="next"===i?r.indexOf("><",e===n.line?n.character:0):r.lastIndexOf("><"),l=-1;return l=c>-1&&d>-1?"next"===i?Math.min(c,d):Math.max(c,d):c>-1?c:d,l>-1?new vscode.Selection(e,l+1,e,l+1):void 0}exports.fetchEditPoint=fetchEditPoint;