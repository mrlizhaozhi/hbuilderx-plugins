"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchTag=void 0;const vscode=require("vscode"),util_1=require("./util"),parseDocument_1=require("./parseDocument");function matchTag(){if(!(0,util_1.validate)(!1)||!vscode.window.activeTextEditor)return;const e=vscode.window.activeTextEditor,t=e.document,o=(0,parseDocument_1.getRootNode)(t,!0);if(!o)return;let n=[];e.selections.forEach((e=>{const s=getUpdatedSelections(t,o,e.start);s&&n.push(s)})),n.length&&(e.selections=n,e.revealRange(e.selections[n.length-1]))}function getUpdatedSelections(e,t,o){const n=e.offsetAt(o),s=(0,util_1.getHtmlFlatNode)(e.getText(),t,n,!0);if(!s)return;if(!s.open||!s.close||n>s.open.end&&n<s.close.start)return;const c=n<=s.open.end?s.close.start+2:s.start+1;return(0,util_1.offsetRangeToSelection)(e,c,c)}exports.matchTag=matchTag;