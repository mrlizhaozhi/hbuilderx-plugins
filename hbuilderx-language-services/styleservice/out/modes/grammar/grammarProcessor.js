"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGrammarCompletionData=void 0;const vscode_languageserver_1=require("vscode-languageserver"),vscode_uri_1=require("vscode-uri"),core_1=require("../../../../core"),entry_1=require("../../../../htmlservice/entry"),util_1=require("../utils/util");function getGrammarCompletionData(e,t,r,o,a){if(!(0,util_1.styleIsRightCompletionType)(o,void 0,[core_1.NodeType.ClassSelector,core_1.NodeType.IdentifierSelector,core_1.NodeType.ElementNameSelector],core_1.NodeType.Selector))return a;let i=a.items;for(var n=i.length-1;n>=0;--n)core_1.html5Tags.includes(i[n].label)&&i.splice(n,1);let s=(0,entry_1.getHtmlTags)(e);for(n=i.length-1;n>=0;--n)s.includes(i[n].label)&&i.splice(n,1);let l=t.offsetAt(r),d=(0,core_1.getContextData)(t,l,void 0).leftText,c=vscode_languageserver_1.Position.create(r.line,r.character-d.length);for(let e of s)e.length>0&&i.push({label:e,textEdit:vscode_languageserver_1.TextEdit.replace(vscode_languageserver_1.Range.create(c,r),e),kind:vscode_languageserver_1.CompletionItemKind.Keyword,data:{hxKind:core_1.HxIconKind.ELEMENT}});if(!e)return console.error("getGrammarCompletionData.workspaceFolder is undefined"),a;let u=vscode_uri_1.URI.parse(t.uri).fsPath,_=vscode_uri_1.URI.parse(e.uri).fsPath;return(0,core_1.getProjectType)(_)===core_1.ProjectType.PT_UniApp_Vue&&(u.endsWith(".nvue")||u.endsWith(".vue")||u.endsWith(".css")||u.endsWith(".scss")||u.endsWith(".less")||u.endsWith(".styl"))&&i.push({label:"page",textEdit:vscode_languageserver_1.TextEdit.replace(vscode_languageserver_1.Range.create(c,r),"page"),documentation:{kind:"markdown",value:"Equivalent to the body node"},kind:vscode_languageserver_1.CompletionItemKind.Keyword,data:{hxKind:core_1.HxIconKind.ELEMENT}}),a}exports.getGrammarCompletionData=getGrammarCompletionData;