"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.styleIsRightCompletionType=exports.styleGetNodeAtOffset=exports.getLocationFromText=exports.getLocationFromPosition=exports.createAstNode=void 0;const vscode_css_languageservice_1=require("vscode-css-languageservice"),vscode_languageserver_1=require("vscode-languageserver");function styleGetNodeAtOffset(e,t){let o=null;return!e||t<e.offset||t>e.end?null:(e.accept((e=>-1===e.offset&&-1===e.length||e.offset<=t&&e.end>=t&&(o?e.length<=o.length&&(o=e):o=e,!0))),o)}function styleIsRightCompletionType(e,t,o,s,r){if(!e)return!1;if(e.isNode){if(t)for(const o of t){if(e.type===o)return!0;if(e.parentType===o)return!0}if(o)for(const t of o){if(e.nodeType===t)return!0;if(e.parentNodeType===t)return!0}}else{if(s&&e.nodeType===s)return!0;if(r&&e.context===r)return!0}return!1}function createAstNode(e,t){return"css"===t?(0,vscode_css_languageservice_1.getCSSLanguageService)().parseStylesheet(e):"scss"===t?(0,vscode_css_languageservice_1.getSCSSLanguageService)().parseStylesheet(e):"less"===t?(0,vscode_css_languageservice_1.getLESSLanguageService)().parseStylesheet(e):(console.error("fileType is not style"),(0,vscode_css_languageservice_1.getCSSLanguageService)().parseStylesheet(e))}function getLocationFromPosition(e,t,o){const s=styleGetNodeAtOffset(t,e.offsetAt(o));if(!s)return;const r=e.positionAt(s.offset),n=e.positionAt(s.end),i=vscode_languageserver_1.Range.create(r,n);return{uri:e.uri,range:i}}function getLocationFromText(e,t,o,s){let r=[];return t.accept((t=>{if(t.type===o){if(t.getText()===s){let o=e.positionAt(t.offset),s=e.positionAt(t.end),n=vscode_languageserver_1.Range.create(o,s);r.push({uri:e.uri,range:n})}return!1}return!0})),r}exports.styleGetNodeAtOffset=styleGetNodeAtOffset,exports.styleIsRightCompletionType=styleIsRightCompletionType,exports.createAstNode=createAstNode,exports.getLocationFromPosition=getLocationFromPosition,exports.getLocationFromText=getLocationFromText;