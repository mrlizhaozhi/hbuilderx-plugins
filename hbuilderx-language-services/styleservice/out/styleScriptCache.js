"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleScriptCache=exports.StyleCacheInfo=void 0;const vscode_languageserver_textdocument_1=require("vscode-languageserver-textdocument");class StyleCacheInfo{constructor(t,e,s){this._styleDocument=t,this._version=e,this._tsImpl=s}get styleDocument(){return this._styleDocument}get scriptSnapshot(){if(this._scriptSnapshot)return this._scriptSnapshot;let t=this._tsImpl.ScriptSnapshot.fromString(this.styleDocument.getText());return this._scriptSnapshot=t}get version(){return this._version}}exports.StyleCacheInfo=StyleCacheInfo;class StyleScriptCache{constructor(t,e){this.tsImpl=t,this.tsServerHost=e,this.cache=new Map}getScriptSnapshot(t){let e=this.getUpToDateInfo(t);if(e)return e.scriptSnapshot}getUpToDateInfo(t){let e=this.cache.get(t),s=this.tsServerHost.getScriptVersion(t);if(e&&e.version===s)return e;let r=this.tsServerHost.getScriptSnapshot(t);if(!r)return;let o=r.getText(0,r.getLength()),c=vscode_languageserver_textdocument_1.TextDocument.create(t,"style",0,o),n=new StyleCacheInfo(c,s,this.tsImpl);return this.cache.set(t,n),n}}exports.StyleScriptCache=StyleScriptCache;