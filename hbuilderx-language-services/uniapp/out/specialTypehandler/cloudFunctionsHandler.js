"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fs=require("fs"),path=require("path"),vscode_languageserver_protocol_1=require("vscode-languageserver-protocol"),core_1=require("../../../core");class CloudFunctionsHandler{doComplete(e,t,o,r){let n=new Set;(0,core_1.getAllCloudFunctionsWithoutObject)(o.project.fsPath).forEach((e=>{n.add(e.name)}));let a=[];return n.forEach((e=>{a.push({label:e,kind:vscode_languageserver_protocol_1.CompletionItemKind.Property,documentation:e})})),a}doCompleteResolve(e,t,o,r,n){return e}doHover(e,t,o,r){}doDefinition(e,t,o,r){let n=[],a=(0,core_1.getAllCloudFunctionsWithoutObject)(o.project.fsPath),i=e.getText(o.range);if(o.kind===core_1.StringLocationInfoKind.IN_JS_LIKE){const l=o.ast;r.get(core_1.LanguageServiceType.TS).getTokenAtPosition(l,e.offsetAt(t));for(let e of a)if(e.name==i){let t=path.join(e.path,"index.js");if(!fs.existsSync(t))return n;n.push({targetUri:t,targetRange:(0,core_1.getNullRange)(),targetSelectionRange:(0,core_1.getNullRange)(),originSelectionRange:o.range})}}return n}doReference(e,t,o,r){return[]}}exports.default=CloudFunctionsHandler;