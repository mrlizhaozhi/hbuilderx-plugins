"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fs=require("fs"),path=require("path"),vscode_languageserver_protocol_1=require("vscode-languageserver-protocol"),core_1=require("../../../core");function getTargetPath(e){let t=path.join(e,"index.obj.js");return fs.existsSync(t)?t:(t=path.join(e,"index.js"),fs.existsSync(t)?t:"")}class CloudObjectsHandler{doComplete(e,t,r,o){let n=[],a=new Set;return(0,core_1.getAllCloudObjects)(r.project.fsPath).forEach((e=>{a.add(e.name)})),a.forEach((e=>{n.push({label:e,kind:vscode_languageserver_protocol_1.CompletionItemKind.Property,documentation:e})})),n}doCompleteResolve(e,t,r,o,n){return e}doHover(e,t,r,o){}doDefinition(e,t,r,o){let n=e.getText(r.range),a=(0,core_1.getAllCloudObjects)(r.project.fsPath);for(let e of a)if(e.name==n){let t=getTargetPath(e.path);return 0==t.length?[]:[{targetUri:t,targetRange:(0,core_1.getNullRange)(),targetSelectionRange:(0,core_1.getNullRange)(),originSelectionRange:r.range}]}return[]}doReference(e,t,r,o){return[]}}exports.default=CloudObjectsHandler;